!function(t,r){"function"==typeof define&&(define.amd||define.cmd)?define(function(t){return r(t)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=r(t):t.Router=r(t)}("undefined"!=typeof window?window:this,function(t){var r={routes:[],mode:"history",root:"/",noop:function(){},trimSlash:function(t){return t.toString().replace(/\/$/,"").replace(/^\//,"")},init:function(r){return r&&(this.mode=r.mode&&"history"===r.mode&&t.history.pushState?"history":"hash",this.root=r.root?"/"+this.trimSlash(r.root)+"/":"/"),this},getCurrentFragment:function(){var r="";if("history"===this.mode)r=this.trimSlash(decodeURI(t.location.pathname+t.location.search)),r=r.replace(/\?(.*)$/,""),r="/"!=this.root?r.replace(this.root,""):r;else{var e=t.location.href.match(/#(.*)$/);r=e?e[1]:""}return this.trimSlash(r)},add:function(t){return"object"==typeof t&&this.routes.push({path:t.path||"",enterHandler:t.enterHandler||this.noop,handler:t.handler||this.noop,exitHandler:t.exitHandler||this.noop,params:t.params||[],_routeParams:[],scope:t.scope||Object.create(null)}),this},remove:function(t){for(var r=0;r<t.length;r++)for(var e,o=0;o<this.routes.length,e=this.routes[o];o++)if(e.path===t.path||e.handler===t.handler)return this.routes.splice(o,1),this;return this},reset:function(){return this.routes=[],this.mode="history",this.root="/",this},match:function(t){for(var r,e=t||this.getCurrentFragment(),o=[],n=0;n<this.routes.length,r=this.routes[n];n++){var a=e.match(r.path);a&&(a.shift(),r._routeParams=a,o.push(r))}return o},run:function(t){for(var r=0;r<t.length;r++){var e,o=t[r];e=o.enterHandler.apply({},o.params.concat(o._routeParams)),e!==!1&&o.handler.apply(o.scope,o.params.concat(o._routeParams))}return this},listen:function(){var t,r,e,o=this,n=o.getCurrentFragment(),a=function(){if(n!==o.getCurrentFragment()){if(t=n,n=o.getCurrentFragment(),r=o.match(n),t){e=o.match(n);for(var a=0;a<e.length;a++){var i=e[a];i.exitHandler.apply(i.scope,i.params.concat(i._routeParams))}}o.run(r)}};return clearInterval(this.interval),this.interval=setInterval(a,50),this},go:function(r){return r=r?r:"","history"===this.mode?t.history.pushState(null,"",this.root+this.trimSlash(r)):t.location.href=t.location.href.replace(/#(.*)$/,"")+"#"+r,this}};return r});