(function(b){var e=function(a,c){var d=this;this.options=c;this.$tableWrapper=null;this.$tableScrollWrapper=b(a);this.$table=b(a).find("table");if(1!==this.$table.length)throw Error("Exactly one table is expected in a .table-responsive div.");this.$tableScrollWrapper.attr("data-pattern",this.options.pattern);this.id=this.$table.prop("id")||this.$tableScrollWrapper.prop("id")||"id"+Math.random().toString(16).slice(2);this.$stickyTableHeader=this.$tableClone=null;this.$thead=this.$table.find("thead");this.$tbody=this.$table.find("tbody");this.$hdrCells=this.$thead.find("th");this.$bodyRows=this.$tbody.find("tr");this.$focusBtn=this.$focusGroup=this.$displayAllBtn=this.$dropdownContainer=this.$dropdownBtn=this.$dropdownGroup=this.$btnToolbar=null;this.displayAllTrigger="display-all-"+this.id+".responsive-table";this.idPrefix=this.id+"-col-";this.iOS=!!(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i));this.wrapTable();this.createButtonToolbar();this.setupHdrCells();this.setupStandardCells();this.options.stickyTableHeader&&this.createStickyTableHeader();this.$dropdownContainer.is(":empty")&&this.$dropdownGroup.hide();b(window).bind("orientationchange resize "+this.displayAllTrigger,function(){d.$dropdownContainer.find("input").trigger("updateCheck");b.proxy(d.updateSpanningCells(),d)})};e.DEFAULTS={pattern:"priority-columns",stickyTableHeader:!0,fixedNavbar:".navbar-fixed-top",addDisplayAllBtn:!0,addFocusBtn:!1,focusBtnIcon:"glyphicon glyphicon-screenshot"};e.prototype.wrapTable=function(){this.$tableWrapper=this.$tableScrollWrapper.parent()};e.prototype.createButtonToolbar=function(){var a=this;this.$btnToolbar=b(".btn-toolbar");this.$dropdownGroup=b('<div class="btn-group dropdown-btn-group pull-right" />');this.$dropdownBtn=b('<button class="btn btn-default dropdown-toggle  waves-effect waves-float" data-toggle="dropdown">'+trans("Display")+' <span class="caret"></span></button>');this.$dropdownContainer=b('<ul class="dropdown-menu"/>');this.options.addDisplayAllBtn&&(this.$displayAllBtn=b('<button class="btn btn-default  waves-effect waves-float">'+trans("Display all")+"</button>"),this.$dropdownGroup.append(this.$displayAllBtn),this.$table.hasClass("display-all")&&this.$displayAllBtn.addClass("btn-primary"),this.$displayAllBtn.click(function(){b.proxy(a.displayAll(null,!0),a)}));this.$dropdownGroup.append(this.$dropdownBtn).append(this.$dropdownContainer);this.$btnToolbar.append(this.$dropdownGroup);1>this.$btnToolbar.length&&this.$tableScrollWrapper.before(this.$btnToolbar)};e.prototype.displayAll=function(a,c){this.$displayAllBtn&&this.$displayAllBtn.toggleClass("btn-primary",a);this.$table.toggleClass("display-all",a);this.$tableClone&&this.$tableClone.toggleClass("display-all",a);c&&b(window).trigger(this.displayAllTrigger)};e.prototype.preserveDisplayAll=function(){var a="table-cell";b("html").hasClass("lt-ie9")&&(a="inline");b(this.$table).find("th, td").css("display",a);this.$tableClone&&b(this.$tableClone).find("th, td").css("display",a)};e.prototype.createStickyTableHeader=function(){var a=this;a.$tableClone=a.$table.clone();a.$tableClone.prop("id",this.id+"-clone");a.$tableClone.find("[id]").each(function(){b(this).prop("id",b(this).prop("id")+"-clone")});a.$tableClone.wrap('<div class="sticky-table-header"/>');a.$stickyTableHeader=a.$tableClone.parent();a.$stickyTableHeader.css("height",a.$thead.height()+2);b("html").hasClass("lt-ie10")?a.$tableWrapper.prepend(a.$stickyTableHeader):a.$table.before(a.$stickyTableHeader);b(window).bind("scroll resize",function(){b.proxy(a.updateStickyTableHeader(),a)});b(a.$tableScrollWrapper).bind("scroll",function(){b.proxy(a.updateStickyTableHeader(),a)})};e.prototype.updateStickyTableHeader=function(){var a=this,c=0,d=a.$table.offset().top,f=b(window).scrollTop()-1,g=a.$table.height()-a.$stickyTableHeader.height(),e=f+b(window).height()-b(document).height(),c=!a.iOS,h=0;b(a.options.fixedNavbar).length&&(h=b(a.options.fixedNavbar).first().height(),f+=h);var k=f>d&&f<d+a.$table.height();c?(a.$stickyTableHeader.scrollLeft(a.$tableScrollWrapper.scrollLeft()),a.$stickyTableHeader.addClass("fixed-solution"),c=h-1,f-d>g?(c-=f-d-g,a.$stickyTableHeader.addClass("border-radius-fix")):a.$stickyTableHeader.removeClass("border-radius-fix"),k?a.$stickyTableHeader.css({visibility:"visible",top:c+"px",width:a.$tableScrollWrapper.innerWidth()+"px"}):a.$stickyTableHeader.css({visibility:"hidden",width:"auto"})):(a.$stickyTableHeader.removeClass("fixed-solution"),c=f-d-1,0>c?c=0:c>g&&(c=g),0<e&&(c-=e),k?(a.$stickyTableHeader.css({visibility:"visible"}),a.$stickyTableHeader.animate({top:c+"px"},400),a.$thead.css({visibility:"hidden"})):a.$stickyTableHeader.animate({top:"0"},400,function(){a.$thead.css({visibility:"visible"});a.$stickyTableHeader.css({visibility:"hidden"})}))};e.prototype.setupHdrCells=function(){var a=this;a.$hdrCells.each(function(c){var d=b(this),f=d.prop("id"),g=d.text();f||(f=a.idPrefix+c,d.prop("id",f));""===g&&(g=d.attr("data-col-name"));if(d.is("[data-priority]")){c=b('<li class="checkbox-row"><input type="checkbox" name="toggle-'+f+'" id="toggle-'+f+'" value="'+f+'" /> <label for="toggle-'+f+'">'+g+"</label></li>");var e=c.find("input");a.$dropdownContainer.append(c);c.click(function(){e.prop("checked",!e.prop("checked"));e.trigger("change")});b("html").hasClass("lt-ie9")&&e.click(function(){b(this).trigger("change")});c.find("label").click(function(a){a.stopPropagation()});c.find("input").click(function(a){a.stopPropagation()}).change(function(){var c=b(this),d=c.val(),d=a.$tableWrapper.find("#"+d+", #"+d+"-clone, [data-columns~="+d+"]");a.$table.hasClass("display-all")&&(b.proxy(a.preserveDisplayAll(),a),a.$table.removeClass("display-all"),a.$tableClone&&a.$tableClone.removeClass("display-all"),a.$displayAllBtn.removeClass("btn-primary"));d.each(function(){var a=b(this);c.is(":checked")?("none"!==a.css("display")&&a.prop("colSpan",parseInt(a.prop("colSpan"))+1),a.show()):1<parseInt(a.prop("colSpan"))?a.prop("colSpan",parseInt(a.prop("colSpan"))-1):a.hide()})}).bind("updateCheck",function(){"none"!==d.css("display")?b(this).prop("checked",!0):b(this).prop("checked",!1)}).trigger("updateCheck")}})};e.prototype.setupStandardCells=function(){var a=this;a.$bodyRows.each(function(){var c=0;b(this).find("th, td").each(function(){for(var d=b(this),f="",e=d.prop("colSpan"),l=0,h=c;h<c+e;h++){var f=f+" "+a.idPrefix+h,k=a.$tableScrollWrapper.find("#"+a.idPrefix+h),m=k.attr("data-priority");m&&d.attr("data-priority",m);"none"===k.css("display")&&l++}1<e&&(d.addClass("spn-cell"),l!==e?d.show():d.hide());d.prop("colSpan",Math.max(e-l,1));f=f.substring(1);d.attr("data-columns",f);c+=e})})};e.prototype.updateSpanningCells=function(){this.$table.find(".spn-cell").each(function(){for(var a=b(this),c=a.attr("data-columns").split(" "),d=c.length,f=0,e=0;e<d;e++)"none"===b("#"+c[e]).css("display")&&f++;f!==d?a.show():a.hide();a.prop("colSpan",Math.max(d-f,1))})};var n=b.fn.responsiveTable;b.fn.responsiveTable=function(a){return this.each(function(){var c=b(this),d=c.data("responsiveTable"),f=b.extend({},e.DEFAULTS,c.data(),"object"===typeof a&&a);if(""!==f.pattern&&(d||c.data("responsiveTable",d=new e(this,f)),"string"===typeof a))d[a]()})};b.fn.responsiveTable.Constructor=e;b.fn.responsiveTable.noConflict=function(){b.fn.responsiveTable=n;return this};b(document).on("click.dropdown.data-api",".dropdown-menu .checkbox-row",function(a){a.stopPropagation()});b("html").removeClass("no-js").addClass("js");"undefined"!==typeof window.matchMedia||"undefined"!==typeof window.msMatchMedia||"undefined"!==typeof window.styleMedia?b("html").addClass("mq"):b("html").addClass("no-mq");"ontouchstart"in window?b("html").addClass("touch"):b("html").addClass("no-touch")})(jQuery);